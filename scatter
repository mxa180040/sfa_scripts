import maya.OpenMayaUI as omui
from PySide2 import QtWidgets, QtCore
from shiboken2 import wrapInstance

def maya_main_window():
    """Return the Maya main window widget"""
    main_window = omui.MQtUtil_mainWindow()
    return wrapInstance(long(main_window), QtWidgets.QWidget)


class ScatterToolUI(QtWidgets.QDialog):
    """Class for Scatter Tool UI"""

    def __init__(self):
        super(ScatterToolUI, self).__init__(parent=maya_main_window())
        self.setWindowTitle("Scatter Tool")
        self.setMinimumWidth(500)
        self.setWindowFlags(self.windowFlags() ^
                            QtCore.Qt.WindowContextHelpButtonHint)
        self.setWindowFlags(self.windowFlags() ^
                            QtCore.Qt.WindowContextHelpButtonHint)

    def create_connections(self):
        """Connects signals and slots"""
        self.load_source_btn.clicked.connect(self.load_source)
        self.load_destination_btn.clicked.connect(self.load_destination)
        self.scatter_btn.clicked.connect(self.scatter)

    def _create_button_ui(self):
        self.load_source_btn = QtWidgets.QPushButton()
        self.load_destination_btn = QtWidgets.QPushButton()
        layout = QtWidgets.QHBoxLayout()
        layout.addWidget(self.load_source_btn)
        layout.addWidget(self.load_destination_btn)
        return layout
      
    def create_ui(self, MainWindow):
        MainWindow.setWindowTitle("Scatter Tool")
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.verticalLayout = QtWidgets.QVBoxLayout(self.centralwidget)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        
        self.source_object_dpy = QtWidgets.QLineEdit(self.centralwidget)
        self.source_object_dpy.setReadOnly(True)
        self.horizontalLayout.addWidget(self.source_object_dpy)
        self.load_source_btn = QtWidgets.QPushButton("Load Source Object")
        self.horizontalLayout.addWidget(self.load_source_btn)
        spacerItem = QtWidgets .QSpacerItem(20, 20,
                                            QtWidgets.QSizePolicy.Expanding,
                                            QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout.addItem(spacerItem)
        
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.destination_object_dpy = QtWidgets.QLineEdit(self.centralwidget)
        self.destination_object_dpy.setReadOnly(True)
        self.horizontalLayout.addWidget(self.destination_object_dpy)
        self.load_destination_btn = QtWidgets.QPushButton("Load "
                                                          "Destination "
                                                          "Object")
        self.horizontalLayout.addWidget(self.load_destination_btn)
        self.horizontalLayout.addItem(spacerItem)
        
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.label = QtWidgets.QLabel("Number of Instances")
        self.horizontalLayout.addWidget(self.label)
        self.num_instances = QtWidgets.QSpinBox(self.centralwidget)
        self.num_instances.setMinimumSize(QtCore.QSize(100, 0))
        self.num_instances.setMaximum(10000)
        self.num_instances.setProperty("value", 1)
        self.horizontalLayout.addWidget(self.num_instances)
        self.horizontalLayout.addItem(spacerItem)
        
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.label = QtWidgets.QLabel("Min Object Scale")
        self.horizontalLayout.addWidget(self.label)
        self.min_scale = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.min_scale.setSingleStep(0.25)
        self.min_scale.setProperty("value", 1.0)
        self.min_scale.setObjectName("min_scale")
        self.horizontalLayout.addWidget(self.min_scale)
        self.horizontalLayout.addItem(spacerItem)
        
        self.label = QtWidgets.QLabel("Max Object Scale")
        self.horizontalLayout.addWidget(self.label)
        self.max_scale = QtWidgets.QDoubleSpinBox(self.centralwidget)
        self.max_scale.setSingleStep(0.25)
        self.max_scale.setProperty("value", 1.0)
        self.max_scale.setObjectName("max_scale")
        self.horizontalLayout.addWidget(self.max_scale)
        self.horizontalLayout.addItem(spacerItem)
        
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.horizontalLayout = QtWidgets.QHBoxLayout()
        self.label = QtWidgets.QLabel("Min Rotation")
        self.horizontalLayout.addWidget(self.label)
        self.rotate_min = QtWidgets.QSpinBox(self.centralwidget)
        self.rotate_min.setMinimum(0)
        self.rotate_min.setProperty("value", 0)
        self.horizontalLayout.addWidget(self.rotate_min)
        
        self.label = QtWidgets.QLabel("Max Rotation")
        self.horizontalLayout.addWidget(self.label)
        self.rotate_max = QtWidgets.QSpinBox(self.centralwidget)
        self.rotate_max.setMaximum(360)
        self.rotate_max.setProperty("value", 360)
        self.rotate_max.setObjectName("rotate_max")
        self.horizontalLayout.addWidget(self.rotate_max)
        
        self.verticalLayout.addLayout(self.horizontalLayout)
        self.scatter_btn = QtWidgets.QPushButton("Scatter")
        self.scatter_btn.setObjectName("scatter_btn")
        self.verticalLayout.addWidget(self.scatter_btn)
        
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 250, 21))
        self.menubar.setObjectName("menubar")
        MainWindow.setMenuBar(self.menubar)

        QtCore.QMetaObject.connectSlotsByName(MainWindow)
